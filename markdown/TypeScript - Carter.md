## TypeScript = Type + JavaScript

> [æŽé€šæ´²](https://github.com/CarterLi) -- åˆ›æ–°å‰ç«¯ç»„

----

## JavaScript: åŠ¨æ€ç±»åž‹è¯­è¨€

* JavaScript ä¸æ˜¯æ²¡æœ‰ç±»åž‹ã€‚æ‰€è°“â€œåŠ¨æ€â€ç±»åž‹è¯­è¨€åªæ˜¯ä¸åœ¨ä»£ç é‡Œæ˜¾å¼æŒ‡å®šå˜é‡çš„ç±»åž‹ã€‚

```js
var a = 1;
typeof a === 'number';
```

```js
var b = [ 1, 2, 3 ];
typeof b === 'object';
Object.prototype.toString.call(b) === '[object Array]';
```

----

## åŠ¨æ€ç±»åž‹è¯­è¨€çš„é—®é¢˜

* JavaScript ä½œä¸ºåŠ¨æ€ç±»åž‹è¯­è¨€ï¼Œåœ¨ç»™å¼€å‘äººå‘˜å¸¦æ¥ä¸€äº›ä¾¿åˆ©çš„åŒæ—¶ï¼Œå¸¦æ¥çš„æ›´å¤šæ˜¯æ•°ä¸æ¸…çš„æš—å‘ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªè¡¨è¾¾å¼ï¼š

```js
a + b
```

* å¯ä»¥ä»£è¡¨æ•°å­¦ç›¸åŠ ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨å­—ç¬¦ä¸²æ‹¼æŽ¥ï¼Œè¿™éƒ½æ²¡æœ‰é—®é¢˜ã€‚ä½†äº‹æƒ…å¹¶æ²¡è¿™ä¹ˆç®€å•ã€‚é—®ï¼š

```js
var a = [1], b = [2];
a + b = ?
```

* å¦‚æžœä½ åŽ»é—® pythonã€ruby ç¨‹åºå‘˜ï¼Œä»–å¯èƒ½ä¼šè®¤ä¸º a + b = [1, 2]ï¼›å¦‚æžœä½ åŽ»é—® Java ç¨‹åºå‘˜ï¼Œä»–å¯èƒ½ä¼šæœŸæœ›æŠ¥é”™ï¼Œè‡³å°‘æ˜¯ä¸ªè¿è¡Œæ—¶çš„ TypeErrorã€‚ç„¶å¹¶åµï¼ŒJavaScript çš„åšæ³•æ˜¯ï¼šæŠŠä¸¤è¾¹æ“ä½œæ•°éƒ½è½¬å­—ç¬¦ä¸²åŽæ‹¼æŽ¥ï¼Œç»“æžœä¸º '12'

----

## TypeScript: ç»™ JavaScript åŠ å…¥ç±»åž‹æ£€æŸ¥

* é‚£ä¹ˆæ€Žä¹ˆè§£å†³å‘¢ï¼Ÿå¾®è½¯ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ï¼šç»™ JavaScript å¼•å…¥é™æ€ç±»åž‹æ£€æŸ¥å°±å¥½äº†ã€‚äºŽæ˜¯ TypeScript è¯žç”Ÿäº†ã€‚

* å¾®è½¯ç»™ TypeScript çš„å®˜æ–¹å®šä¹‰

> TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.

----

## TypeScript: ç»™ JavaScript åŠ å…¥ç±»åž‹æ£€æŸ¥

* ä½œä¸º JavaScript è¯­è¨€çš„è¶…é›†ï¼Œå®ƒä¿ç•™äº† JavaScript çš„æ‰€æœ‰è¯­æ³•ã€æ¦‚å¿µã€‚`undefined` è¿™ç§æ¦‚å¿µä¸æ¸…ä¹Ÿæ²¡ä»€ä¹ˆåµç”¨çš„ä¸œè¥¿ä¾ç„¶å­˜åœ¨ï¼Œ`typeof null` ä¾ç„¶æ˜¯ `'object'`ã€‚ä½†è‡³å°‘ï¼ŒTypeScript ç»™å˜é‡å¼•å…¥äº†é™æ€ç±»åž‹ï¼Œè€Œä¸”èˆå¼ƒäº†ä¸€äº› JavaScript é‡Œæ˜Žæ˜¾çš„ç³Ÿç²•ï¼ˆéšå¼ç±»åž‹è½¬æ¢ï¼‰

----

## TypeScript ä¿æŠ¤ä½ çš„ä»£ç è´¨é‡ 1

* çŽ°åœ¨æ˜¯ TypeScript äº†ï¼Œé—®ï¼š

```typescript
var a = [1], b = [2];
a + b = ?
```

* ç­”ï¼šåœ¨ TypeScript é‡Œä¸€åˆ‡å˜é‡çš†æœ‰é™æ€ç±»åž‹ã€‚è™½ç„¶æ²¡æœ‰æ˜¾å¼å£°æ˜Žaã€b çš„ç±»åž‹ï¼Œå› ä¸ºä¸¤è€…éƒ½è¢«åˆå§‹åŒ–æ•°ç»„ï¼Œa å’Œ b éƒ½è¢«æŽ¨å¯¼ä¸ºæ•°ç»„ç±»åž‹ï¼ˆnumber[]ï¼‰ã€‚

* ä¸¤ä¸ªæ•°ç»„ç±»åž‹ç›¸åŠ æ˜¯ä»€ä¹ˆå‘¢ï¼ŸTypeScript çš„åˆ›é€ è€…è®¤ä¸ºè‡³å°‘ä¸åº”è¯¥æ˜¯éšå¼è½¬æ¢åŽæ‹¼æŽ¥å­—ç¬¦ä¸²ï¼ŒäºŽæ˜¯ TypeScript æ‹’ç»ç¼–è¯‘è¿™æ®µä»£ç ï¼š

> error TS2365: Operator '+' cannot be applied to types 'number[]' and 'number[]'.

----

## TypeScript ä¿æŠ¤ä½ çš„ä»£ç è´¨é‡ 2

* ä¾‹å¦‚è·Ÿ JavaScript åˆå­¦è€…ï¼ˆåŽç«¯ç¨‹åºå‘˜ï¼‰åå¤å¼ºè°ƒçš„ == é—®é¢˜ï¼Œæ›´ç›´æŽ¥çš„åŠžæ³•æ˜¯å»ºè®®ä»–åŽ»ç”¨ TypeScriptã€‚

```typescript
var a = 1, b = '1';
a == b // error TS2365: Operator '==' cannot be applied to types 'number' and 'string'.
```

* TypeScript ç›´æŽ¥ç¦æ­¢ä¸åŒç±»åž‹çš„æ¯”è¾ƒè¿ç®—ï¼Œè¿™å¯¹äºŽ === ä¹Ÿé€‚ç”¨

```typescript
a === b  // error TS2365: Operator '===' cannot be applied to types 'number' and 'string'.
```

* æœ‰äººå¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆè¿ž === ä¹Ÿç¦æ­¢ï¼Œé‚£æˆ‘é—®éƒ½çŸ¥é“ a å’Œ b ç±»åž‹ä¸åŒç»“æžœæ˜¯falseäº†å¹²å˜›è¿˜åŽ»æ¯”ï¼Ÿ

----

## TypeScript ä¿æŠ¤ä½ çš„ä»£ç è´¨é‡ 3

* å†ä¾‹å¦‚å¸¸è§çš„åˆ†å·é—®é¢˜ã€‚TypeScript è¯­æ³•ä¸Šç»§æ‰¿äº†è¿™ç‚¹ï¼Œä½†æ˜¯ TypeScript åœ¨åˆ†å·é—®é¢˜ä¸Šæ‰”æœ‰å¸®åŠ©ã€‚

```typescript
var a = 1 // æ­¤å¤„æ— åˆ†å·
+function() { console.log(a) }; // error TS2365: Operator '+' cannot be applied to types 'number' and '() => void'.

function f() {
  return // æ­¤å¤„è¢« JavaScript éšå¼åŠ å…¥äº†åˆ†å·
    { a: 1 }; // error TS7027: Unreachable code detected.
}
```

----

## TypeScript ä¿æŠ¤ä½ çš„ä»£ç è´¨é‡ 4

* å†å†ä¾‹å¦‚ï¼Œè¿™æ˜¯ðŸŸè€æ¿çš„é¢˜ç›®ï¼š

```js
parseInt(0.0000008) = ?
```

* è¿™æ˜¯ TypeScript ç»™å‡ºçš„ç­”æ¡ˆï¼š

> error TS2345: Argument of type 'number' is not assignable to parameter of type 'string'.

* å› ä¸ºåœ¨ TypeScript ä¸­ parseInt è¢«å£°æ˜Žä¸ºï¼š

```typescript
function parseInt(s: string, radix?: number): number;
```

* è€Œ 0.0000008 ä¸èƒ½ä¼ å€¼ç»™ string ç±»åž‹ï¼Œç¼–è¯‘å¤±è´¥ã€‚

----

## TypeScript ä¿æŠ¤ä½ çš„ä»£ç è´¨é‡ 5

* TypeScript å¯ä»¥å¸®ä½ æ£€æŸ¥æ‹¼å†™é”™è¯¯ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

```js
var today = new Date();
today.toLocalString();
```

* å¦‚æžœä¸æ˜¯éžå¸¸ç†Ÿæ‚‰è¿™ä¸ªå‡½æ•°ï¼Œä¹ä¸€çœ‹ä¼¼ä¹Žæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯ TypeScript ä¼šå‘Šè¯‰ä½ ï¼š

> error TS2339: Property 'toLocalString' does not exist on type 'Date'.

* å½“ç„¶å¦‚æžœä½¿ç”¨ TypeScript ä¸€èˆ¬ä¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºï¼š

----

## TypeScript ç»™ä½ çœŸæ­£è¯­ä¹‰åŒ–çš„æ™ºèƒ½æç¤º

* è¯´åˆ° JavaScript æ™ºèƒ½æç¤ºï¼Œæ— è®º IDE å¤šä¹ˆç‰›Bï¼Œæ— è®ºå†æ€Žä¹ˆä¸Šä¸‹æ–‡æŽ¨å¯¼ï¼Œè¿˜æ˜¯å¼±çˆ†äº†

* è¿™ä¸ªä¸æ˜¯ç¼–è¾‘å™¨çš„é—®é¢˜ã€‚JavaScript ä½œä¸ºåŠ¨æ€ç±»åž‹è¯­è¨€ï¼Œå˜é‡çš„ç±»åž‹åªèƒ½æ˜¯è¿è¡Œæ—¶ç¡®å®šï¼Œç¼–è¾‘å™¨ä¸ä¼šè¿è¡Œä½ çš„ JS ä»£ç ï¼Œå¯¹äºŽå¾ˆæ˜¾è€Œæ˜“è§çš„ä»£ç å¯ä»¥é€šè¿‡å…³è”ä¸Šä¸‹æ–‡çŒœåˆ°å˜é‡çš„ç±»åž‹ï¼Œä½†å¯¹äºŽè¿™ç§ï¼š

```js
function f(today) {
  console.log(today.???);
}
```

----

## TypeScript ç»™ä½ çœŸæ­£è¯­ä¹‰åŒ–çš„æ™ºèƒ½æç¤º

* today æ˜¯ä»€ä¹ˆç±»åž‹ï¼Ÿå¤©çŸ¥é“ã€‚å› ä¸ºæ²¡æœ‰è§„å®šå®ƒæ˜¯ä»€ä¹ˆç±»åž‹ï¼Œtodayå¯ä»¥æ˜¯ä»»æ„ç±»åž‹ï¼Œçœ‹è°ƒç”¨æ–¹ç©¿ä»€ä¹ˆå€¼ã€‚

* ä¸çŸ¥é“å˜é‡æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œè‡ªç„¶ä¹Ÿå°±ä¸çŸ¥é“å˜é‡æœ‰ä»€ä¹ˆæˆå‘˜ã€‚

* ä½†å¦‚æžœæ˜¾å¼æŒ‡å®šäº† today çš„ç±»åž‹ï¼Œç¼–è¾‘å™¨å°±èƒ½çŸ¥é“ today å«æœ‰ä»€ä¹ˆæˆå‘˜ï¼Œå°±èƒ½å‡†ç¡®çš„åˆ—å‡º today çš„æˆå‘˜åˆ—è¡¨ã€‚

----

## TypeScript ç»™ä½ çš„æ–‡ä»¶ä¹‹é—´å»ºç«‹å…³è”

* æ–‡ä»¶ä¹‹é—´çš„å…³è”åœ¨ç¼–è¯‘æœŸéƒ½æ˜¯å·²çŸ¥çš„ï¼Œç¼–è¯‘å™¨ï¼ˆç”šè‡³IDEï¼‰çŸ¥é“ä¸åŒæ–‡ä»¶æ‰€å¼•ç”¨çš„å˜é‡æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä»Žè€Œå®žçŽ°æŸ¥æ‰¾å¼•ç”¨ã€ä»£ç é‡æž„ç­‰é«˜çº§åŠŸèƒ½ã€‚

----

## TypeScript ä¸Ž JS æ ‡å‡†åŒ–è¿›ç¨‹ä¿æŒåŒæ­¥

* TypeScript æ”¯æŒæ‰€æœ‰å·²ç»æ ‡å‡†åŒ–çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬ ES2016 çš„ `**` è¿ç®—ç¬¦

* TypeScript æ”¯æŒç¼–è¯‘ Decoratorï¼Œasyncã€awaitï¼ˆä»…æ”¯æŒç¼–è¯‘ä¸º generatorï¼‰åˆ° ES6 ä»£ç 

* åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒTypeScript è¿˜æ”¯æŒ

* enumã€ç±»æˆå‘˜å˜é‡åˆå§‹åŒ–ç­‰ç‰¹æ€§ã€‚

----

## è¯·ç»™ TypeScript ä¸€ä¸ªæœºä¼š ~~~~

```shell
$ npm install typescript -g
```

> http://typescriptlang.org

* å®Œ
